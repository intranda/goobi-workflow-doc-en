# 7.15 goobi\_contentServer.xml

In the file `goobi_contentServer.xml`, technical details about the content server used in Goobi are provided. The configuration file can be used for Goobi Workflow and Goobi Viewer in the same way.

The file is usually located at the following location:

```bash
/opt/digiverso/goobi/config/goobi_contentServer.xml
```

For example, this configuration file looks as follows:

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<config>
	<localConfigPath value="/opt/digiverso/contentServer/config/config_contentServer.xml" />
	<defaultResolution value="600" />
	<maxFileLength value="0" />
	<scaling quality="QUALITY" maxStepSize="50" thumbnailQuality="SPEED"></scaling>
	<imageTypeSettings>
		<type format="png">
			<settings scaleWithScalr="false"></settings>
		</type>
		<type compression="jpeg" colorType="grayscale">
			<settings forceConvertToBuffered="true"></settings>
		</type>
		<type format="jpeg">
			<settings scaleWithScalr="true"></settings>
		</type>
		<type format="tiff" embeddedColorProfile="true">
			<settings scaleWithScalr="false"></settings>
		</type>
		<type format="jpg2000">
			<settings scaleWithScalr="false" allowSubSampling="true"></settings>
		</type>
		<type format="default" colorType="default" compression="default" embeddedColorProfile="both" minSize="0" maxSize="0">
			<settings allowRenderWithJAI="false" scaleWithScalr="true" mergeWithJAI="false" forceConvertToBuffered="false" forceConvertToRGB="false" forwardDirectlyIfPossible="true" preferredImageReader="com.github.jaiimageio"></settings>
		</type>
	</imageTypeSettings>
	<defaultFileNames>
		<pdf value="ContentServer_$datetime" sendAsAttachment="true" />
		<image value="image_$datetime" sendAsAttachment="false" />
	</defaultFileNames>
	<defaultImageConfig defaultFormat="jpeg"></defaultImageConfig>
	<defaultPdfConfig metsFileGroup="PRESENTATION" 
		metsFileUrlRemove="file:\/\/\/opt\/digiverso\/viewer\/media\/" writeAsPdfA="false"
		pagesize="A4"
		imageDpi="0" convertToGrayscale="false" imageScale="1.0" imageCompression="0"/>
	<defaultRepositoryPathImages value="file:///opt/digiverso/viewer/media/" />
	<defaultRepositoryPathPdf value="file:///opt/digiverso/viewer/pdf/" usage="true" />
	<defaultRepositoryPathAlto value="file:///opt/digiverso/viewer/alto/" usage="false" fontFile="font.ttf"/>
	<defaultHighlightColor valueRed="255" valueGreen="255" valueBlue="0" valueAlpha="255" />
	<watermark use="false" scale="true" convertColorSpace="false" scaleToPercent="6"
		configFile="file:///opt/digiverso/viewer/config/config_imageFooter.xml" />
	<errorWaterMark title="Error" titleFontSize="20" 
		messageFontSize="14" messageMaxLineLength="60" />
	<defaultRepositoryPathMets value="" />
	<pdfTitlePage use="true" fontFile="font.ttf"
		templateFolder="file:///opt/digiverso/viewer/config/PDFTitlePage/"
		defaultTemplate="default" />
	<pdfChapterTitlePages use="true" fontFile="font.ttf"
		templateFolder="file:///opt/digiverso/viewer/config/PDFTitlePage/"
		defaultTemplate="default"  />
	<singlePdfTitlePage use="false" fontFile="font.ttf"
		templateFolder="file:///opt/digiverso/viewer/config/PDFTitlePage/"
		defaultTemplate="default" />
	<restapi use="false">
		<iiif>
			<attribution></attribution>
			<logo></logo>
			<license></license>
		</iiif>
		<discloseContentLocation>true</discloseContentLocation>
	</restapi>
	<contentCache useCache="false" size="100" useShortFileNames="false" path="" cachePartialImages="false" />
	<thumbnailCache useCache="false" size="100" useShortFileNames="false" path="" />
	<pdfCache useCache="true" size="100" useShortFileNames="false" />
	<memoryUsage memoryUnit="MB" timeoutUnit="s">
		<image>
			<maxParallelRequests>20</maxParallelRequests>		
			<lowMemoryThreshold>200</lowMemoryThreshold>
			<lowMemoryTimeout>8</lowMemoryTimeout>
		</image>
		<pdf>
			<maxParallelRequests>8</maxParallelRequests>		
			<lowMemoryThreshold>500</lowMemoryThreshold>
			<lowMemoryTimeout>10</lowMemoryTimeout>
		</pdf>
		<metsPdf>
			<maxParallelRequests>4</maxParallelRequests>		
			<lowMemoryThreshold>1000</lowMemoryThreshold>
			<lowMemoryTimeout>20</lowMemoryTimeout>
		</metsPdf>
	</memoryUsage>
	<S3>
		<useCustom>true</useCustom>
		<Endpoint>http://192.168.178.124:9000</Endpoint>
		<AccessKeyID>24JW1VB99T8MAU94TBIC</AccessKeyID>
		<SecretAccessKey>OTrwBXGVBacVdXNSI7SKKrX8b+CqwANa5ngLZ4lB</SecretAccessKey>
	</S3>
</config>
```

## General settings and default values

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<localConfigPath value="/opt/digiverso/contentServer/config/config_contentServer.xml" />
<defaultResolution value="600" />
<maxFileLength value="0" />
<scaling quality="QUALITY" maxStepSize="50" thumbnailQuality="SPEED"></scaling>
<defaultFileNames>
	<pdf value="ContentServer_$datetime" sendAsAttachment="true" />
	<image value="image_$datetime" sendAsAttachment="false" />
</defaultFileNames>
<defaultImageConfig defaultFormat="jpeg"></defaultImageConfig>
<defaultPdfConfig metsFileGroup="PRESENTATION" 
	metsFileUrlRemove="file:\/\/\/opt\/digiverso\/viewer\/media\/" writeAsPdfA="false"
	pagesize="A4"
	imageDpi="0" convertToGrayscale="false" imageScale="1.0" imageCompression="0"/>
<defaultRepositoryPathImages value="file:///opt/digiverso/viewer/media/" />
<defaultRepositoryPathPdf value="file:///opt/digiverso/viewer/pdf/" usage="true" />
<defaultRepositoryPathAlto value="file:///opt/digiverso/viewer/alto/" usage="false" fontFile="font.ttf"/>
<defaultHighlightColor valueRed="255" valueGreen="255" valueBlue="0" valueAlpha="255" />
```

## Image file types

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<imageTypeSettings>
	<type format="png">
		<settings scaleWithScalr="false"></settings>
	</type>
	<type compression="jpeg" colorType="grayscale">
		<settings forceConvertToBuffered="true"></settings>
	</type>
	<type format="jpeg">
		<settings scaleWithScalr="true"></settings>
	</type>
	<type format="tiff" embeddedColorProfile="true">
		<settings scaleWithScalr="false"></settings>
	</type>
	<type format="jpg2000">
		<settings scaleWithScalr="false" allowSubSampling="true"></settings>
	</type>
	<type format="default" colorType="default" compression="default" embeddedColorProfile="both" minSize="0" maxSize="0">
		<settings allowRenderWithJAI="false" scaleWithScalr="true" mergeWithJAI="false" forceConvertToBuffered="false" forceConvertToRGB="false" forwardDirectlyIfPossible="true" preferredImageReader="com.github.jaiimageio"></settings>
	</type>
</imageTypeSettings>
```

## Water marks

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<watermark use="false" scale="true" convertColorSpace="false" scaleToPercent="6"
	configFile="file:///opt/digiverso/viewer/config/config_imageFooter.xml" />
<errorWaterMark title="Error" titleFontSize="20" 
	messageFontSize="14" messageMaxLineLength="60" />
```

## PDF title pages

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<pdfTitlePage use="true" fontFile="font.ttf"
	templateFolder="file:///opt/digiverso/viewer/config/PDFTitlePage/"
	defaultTemplate="default" />
<pdfChapterTitlePages use="true" fontFile="font.ttf"
	templateFolder="file:///opt/digiverso/viewer/config/PDFTitlePage/"
	defaultTemplate="default"  />
<singlePdfTitlePage use="false" fontFile="font.ttf"
	templateFolder="file:///opt/digiverso/viewer/config/PDFTitlePage/"
	defaultTemplate="default" />
```

## REST API

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<restapi use="false">
	<discloseContentLocation>true</discloseContentLocation>
</restapi>
```

## Cache storage

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<contentCache useCache="false" size="100" useShortFileNames="false" path="" cachePartialImages="false" />
<thumbnailCache useCache="false" size="100" useShortFileNames="false" path="" />
<pdfCache useCache="true" size="100" useShortFileNames="false" />
```

## Performance

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<memoryUsage memoryUnit="MB" timeoutUnit="s">
	<image>
		<maxParallelRequests>20</maxParallelRequests>		
		<lowMemoryThreshold>200</lowMemoryThreshold>
		<lowMemoryTimeout>8</lowMemoryTimeout>
	</image>
	<pdf>
		<maxParallelRequests>8</maxParallelRequests>		
		<lowMemoryThreshold>500</lowMemoryThreshold>
		<lowMemoryTimeout>10</lowMemoryTimeout>
	</pdf>
	<metsPdf>
		<maxParallelRequests>4</maxParallelRequests>		
		<lowMemoryThreshold>1000</lowMemoryThreshold>
		<lowMemoryTimeout>20</lowMemoryTimeout>
	</metsPdf>
</memoryUsage>
```

## S3 storage

| Property | Type | Default Value | Description |
| -------- | ---- | ------------- | ----------- |
|  |  |  |  |

```xml
<S3>
	<useCustom>true</useCustom>
	<Endpoint>http://192.168.178.124:9000</Endpoint>
	<AccessKeyID>24JW1VB99T8MAU94TBIC</AccessKeyID>
	<SecretAccessKey>OTrwBXGVBacVdXNSI7SKKrX8b+CqwANa5ngLZ4lB</SecretAccessKey>
</S3>
```

